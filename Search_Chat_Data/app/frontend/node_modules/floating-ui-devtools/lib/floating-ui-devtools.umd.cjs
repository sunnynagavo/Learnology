(function(i,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(i=typeof globalThis<"u"?globalThis:i||self,s(i["floating-ui"]={}))})(this,function(i){"use strict";const s="__FUIDT_CONTROLLER__",a="__FUIDT_ELEMENT_METADATA__",d="__FUIDT_HTML_ELEMENT_REFERENCE__",c=e=>!!(e&&a in e&&e.parentElement!==null),f=()=>{let e=null;const r=new MutationObserver(n=>{if(e)for(const t of n)t.type==="childList"&&Array.from(t.removedNodes).includes(e)&&o.withdraw()}),o={get selectedElement(){return e},select:n=>(c(n)&&(e=n,r.observe(n.parentElement,{childList:!0,subtree:!1})),e&&n&&u(e,n)||o.withdraw(),e),withdraw:()=>{e=null,r.disconnect()}};return o},l=e=>{e.defaultView&&(e.defaultView[s]||(e.defaultView[s]=f()))};function u(e,r){const o=e[a];switch(o.type){case"middleware":return o.references.has(r);default:return!1}}function E(e,r){var o;const n=e;var t;return!!(!(n==null||(o=n.ownerDocument)===null||o===void 0)&&o.defaultView&&n instanceof n.ownerDocument.defaultView[(t=r==null?void 0:r.constructorName)!==null&&t!==void 0?t:"HTMLElement"])}function _(){return`${d}:${crypto.randomUUID()}`}function p(){const e=new WeakSet,r=new Map;return{add(n){const t=_();return r.set(t,n),e.add(n),t},get(n){const t=r.get(n);if(t&&e.has(t))return t},has(n){return e.has(n)}}}const w=e=>{const r=p();return[JSON.parse(JSON.stringify(e,(n,t)=>E(t)?r.add(t):typeof t=="object"&&t&&Object.getPrototypeOf(t)!==Object.prototype&&Object.getPrototypeOf(t)!==Array.prototype?"toString"in t?t.toString():void 0:t)),r]},m=(e,r=T)=>({name:"floating-ui-devtools",fn:o=>{l(e);const[n,t]=w(r(o));return Object.assign(o.elements.floating,{[a]:{references:t,serializedData:n,type:"middleware"}}),{}}}),T=e=>({...e,type:"FloatingUIMiddleware"});i.middleware=m,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
