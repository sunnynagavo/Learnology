{"version":3,"sources":["devtools.ts"],"sourcesContent":["import { MiddlewareArguments } from '@floating-ui/dom';\nimport { PositioningOptions } from '../types';\nimport { FluentUI } from 'floating-ui-devtools';\nimport { isHTMLElement } from '@fluentui/react-utilities';\nimport { listScrollParents } from './listScrollParents';\nimport { fromFloatingUIPlacement } from './fromFloatingUIPlacement';\n\nexport const devtoolsCallback =\n  (options: PositioningOptions) =>\n  (middlewareState: MiddlewareArguments): FluentUI.MiddlewareData => {\n    const {\n      elements: { floating, reference },\n    } = middlewareState;\n    const scrollParentsSet = new Set<HTMLElement>();\n    if (isHTMLElement(reference)) {\n      listScrollParents(reference).forEach(scrollParent => scrollParentsSet.add(scrollParent));\n    }\n    listScrollParents(floating).forEach(scrollParent => scrollParentsSet.add(scrollParent));\n    const flipBoundaries: HTMLElement[] = Array.isArray(options.flipBoundary)\n      ? options.flipBoundary\n      : isHTMLElement(options.flipBoundary)\n      ? [options.flipBoundary]\n      : [];\n    const overflowBoundaries: HTMLElement[] = Array.isArray(options.overflowBoundary)\n      ? options.overflowBoundary\n      : isHTMLElement(options.overflowBoundary)\n      ? [options.overflowBoundary]\n      : [];\n    return {\n      type: 'FluentUIMiddleware',\n      middlewareState,\n      options,\n      initialPlacement: fromFloatingUIPlacement(middlewareState.initialPlacement),\n      placement: fromFloatingUIPlacement(middlewareState.placement),\n      flipBoundaries,\n      overflowBoundaries,\n      scrollParents: Array.from(scrollParentsSet),\n    };\n  };\n"],"names":["isHTMLElement","listScrollParents","fromFloatingUIPlacement","devtoolsCallback","options","middlewareState","elements","floating","reference","scrollParentsSet","Set","forEach","scrollParent","add","flipBoundaries","Array","isArray","flipBoundary","overflowBoundaries","overflowBoundary","type","initialPlacement","placement","scrollParents","from"],"mappings":"AAGA,SAASA,aAAa,QAAQ,4BAA4B;AAC1D,SAASC,iBAAiB,QAAQ,sBAAsB;AACxD,SAASC,uBAAuB,QAAQ,4BAA4B;AAEpE,OAAO,MAAMC,mBACX,CAACC,UACD,CAACC;QACC,MAAM,EACJC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAE,EAClC,GAAGH;QACJ,MAAMI,mBAAmB,IAAIC;QAC7B,IAAIV,cAAcQ,YAAY;YAC5BP,kBAAkBO,WAAWG,OAAO,CAACC,CAAAA,eAAgBH,iBAAiBI,GAAG,CAACD;QAC5E;QACAX,kBAAkBM,UAAUI,OAAO,CAACC,CAAAA,eAAgBH,iBAAiBI,GAAG,CAACD;QACzE,MAAME,iBAAgCC,MAAMC,OAAO,CAACZ,QAAQa,YAAY,IACpEb,QAAQa,YAAY,GACpBjB,cAAcI,QAAQa,YAAY,IAClC;YAACb,QAAQa,YAAY;SAAC,GACtB,EAAE;QACN,MAAMC,qBAAoCH,MAAMC,OAAO,CAACZ,QAAQe,gBAAgB,IAC5Ef,QAAQe,gBAAgB,GACxBnB,cAAcI,QAAQe,gBAAgB,IACtC;YAACf,QAAQe,gBAAgB;SAAC,GAC1B,EAAE;QACN,OAAO;YACLC,MAAM;YACNf;YACAD;YACAiB,kBAAkBnB,wBAAwBG,gBAAgBgB,gBAAgB;YAC1EC,WAAWpB,wBAAwBG,gBAAgBiB,SAAS;YAC5DR;YACAI;YACAK,eAAeR,MAAMS,IAAI,CAACf;QAC5B;IACF,EAAE"}